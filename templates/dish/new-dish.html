<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

{{ template "header" . }}

<body class="bg-gray-50">

  	{{ template "navbar" . }}

	<!-- Lista com modais -->
	{{ template "modal-dish-name" . }}
	{{ template "modal-dish-description" . }}
	{{ template "modal-dish-price" . }}
	{{ template "modal-dish-section" . }}
	{{ template "modal-dish-week-days" . }}
	{{ template "modal-dish-time" . }}
	{{ template "modal-dish-images" . }}
	{{ template "modal-dish-pick-images" . }}
	<!-- Fim da lista com modais -->


	{{ template "footer" . }}
</html>
</body>

<script>
	document.addEventListener('DOMContentLoaded', function() {
		console.log('Opening modal');
		openModal('modal_dish_pick_images');
	});

	// Executar quando prevModalPickImages for pressionado
	document.getElementById('prevModalPickImages').addEventListener('click', function() {
		console.log('Opening modal images');
		closeModal('modal_dish_pick_images');
		openModal('modal_dish_images');
	});

	// Executar quando closeModalPickImages for pressionado
	document.getElementById('closeModalPickImages').addEventListener('click', function() {
		console.log('Closing modal pick images');
		closeModal('modal_dish_pick_images');
	});

	// Executar quando upload-button for pressionado
	document.getElementById('upload-button').addEventListener('click', function() {
		console.log('Closing modal images');
		saveImages();
	});

	// Executar quando nextModalImages for pressionado
	document.getElementById('nextModalImages').addEventListener('click', function() {
		console.log('Opening modal pick images');
		closeModal('modal_dish_images');
		openModal('modal_dish_pick_images');
	});

	// Executar quando prevModalImages for pressionado
	document.getElementById('prevModalImages').addEventListener('click', function() {
		console.log('Opening modal week days');
		closeModal('modal_dish_images');
		openModal('modal_dish_week_days');
	});

	// Executar quando closeModalImages for pressionado
	document.getElementById('closeModalImages').addEventListener('click', function() {
		console.log('Closing modal images');
		closeModal('modal_dish_images');
	});

	// Executar quando nextModalWeekDays for pressionado
	document.getElementById('nextModalWeekDays').addEventListener('click', function() {
		console.log('Opening modal week days');
		closeModal('modal_dish_week_days');
		openModal('modal_dish_images');
	});

	// Executar quando prevModalWeekDays for pressionado
	document.getElementById('prevModalWeekDays').addEventListener('click', function() {
		console.log('Opening modal time');
		closeModal('modal_dish_week_days');
		openModal('modal_dish_time');
	});

	// Executar quando closeModalWeekDays for pressionado
	document.getElementById('closeModalWeekDays').addEventListener('click', function() {
		console.log('Closing modal week days');
		closeModal('modal_dish_week_days');
	});

	// Executar quando nextModalTime for pressionado
	document.getElementById('nextModalTime').addEventListener('click', function() {
		console.log('Opening modal time');
		closeModal('modal_dish_time');
		openModal('modal_dish_week_days');
	});

	// Executar quando prevModalTime for pressionado
	document.getElementById('prevModalTime').addEventListener('click', function() {
		console.log('Opening modal description');
		closeModal('modal_dish_time');
		openModal('modal_dish_price');
	});

	// Executar quando closeModalTime for pressionado
	document.getElementById('closeModalTime').addEventListener('click', function() {
		console.log('Closing modal time');
		closeModal('modal_dish_time');
	});

	// Executar quando nextModalPrice for pressionado
	document.getElementById('nextModalPrice').addEventListener('click', function() {
		console.log('Opening modal price');
		closeModal('modal_dish_price');
		openModal('modal_dish_time');
	});

	// Executar quando prevModalPrice for pressionado
	document.getElementById('prevModalPrice').addEventListener('click', function() {
		console.log('Opening modal description');
		closeModal('modal_dish_price');
		openModal('modal_dish_description');
	});

	// Executar quando closeModalPrice for pressionado
	document.getElementById('closeModalPrice').addEventListener('click', function() {
		console.log('Closing modal price');
		closeModal('modal_dish_price');
	});

	// Executar quando nextModalDescription for pressionado
	document.getElementById('nextModalDescription').addEventListener('click', function() {
		console.log('Closing modal description');
		closeModal('modal_dish_description');
		openModal('modal_dish_price');
	});

	// Executar quando prevModalDescription for pressionado
	document.getElementById('prevModalDescription').addEventListener('click', function() {
		console.log('Opening modal name');
		closeModal('modal_dish_description');
		openModal('modal_dish_name');
	});

	// Executar quando closeModalDescription for pressionado
	document.getElementById('closeModalDescription').addEventListener('click', function() {
		console.log('Closing modal description');
		closeModal('modal_dish_description');
	});

	// Executar quando nextModalName for pressionado
	document.getElementById('nextModalName').addEventListener('click', function() {
		console.log('Opening modal description');
		closeModal('modal_dish_name');
		openModal('modal_dish_description');
	});

	// Executar quando closeModalName for pressionado
	document.getElementById('closeModalName').addEventListener('click', function() {
		console.log('Closing modal name');
		closeModal('modal_dish_name');
	});

	// Function to save images (placeholder)
	function saveImages() {
		console.log('Saving images...');
		// Aqui você pode adicionar a lógica para salvar as imagens
		const fileInput = document.getElementById('images');
		const files = fileInput.files;
		if (files.length == 0) {
			console.log('No images selected.');
			return;
		}
		
		// Cria um objeto FormData
		const formData = new FormData();

		// Adiciona cada arquivo ao objeto FormData
		for (let i = 0; i < files.length; i++) {
			formData.append('images[]', files[i]);
			console.log('Added file:', files[i].name);
		}

		// Envia os arquivos para o servidor usando fetch
		fetch('images/upload-images', {
			method: 'POST',
			body: formData
		})
		.then(response => response.json())
		.then(data => {
			console.log('Success:', data);
		})
		.catch(error => {
			console.error('Error:', error);
		});
	}

	// Close modal function
	window.closeModal = function(modalId) {
		const modal = document.getElementById(modalId);
		const modalContent = modal.querySelector('.modal-content');
		// Adiciona classes para animação de fechamento
		modalContent.classList.remove('scale-100', 'opacity-100');
		modalContent.classList.add('scale-95', 'opacity-0');
		modal.classList.remove('opacity-100');
		modal.classList.add('opacity-0');
		setTimeout(() => {
				modal.classList.add('invisible');
		}, 300); // tempo de espera para a transição
	};

	// Open modal function
	window.openModal = function(modalId) {
		const modal = document.getElementById(modalId);
		const modalContent = modal.querySelector('.modal-content');
		modal.classList.remove('invisible', 'opacity-0');
		modal.classList.add('opacity-100');
		modalContent.classList.remove('scale-95', 'opacity-0');
		modalContent.classList.add('scale-100', 'opacity-100');
	};

</script>

